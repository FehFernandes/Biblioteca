<div class="navbar">
    <div class="navbar-content">
        <a href="/dashboard" class="navbar-brand">
            üìö Sistema Biblioteca
        </a>
        <nav class="navbar-nav">
            <a href="/dashboard" class="nav-link">Dashboard</a>
            <a href="/books" class="nav-link active">Livros</a>
            <a href="/authors" class="nav-link">Autores</a>
            <a href="/loans" class="nav-link">Empr√©stimos</a>
            <a href="/users" class="nav-link">Usu√°rios</a>
            <a href="/dashboard/profile" class="btn btn-secondary btn-sm">Perfil</a>
            <a href="/auth/logout" class="btn btn-danger btn-sm">Sair</a>
        </nav>
    </div>
</div>

<div class="dashboard-container">
    <div class="dashboard-header">
        <div>
            <h1 class="dashboard-title">
                {{#if book.id}}üìù Editar Livro{{else}}üìö Novo Livro{{/if}}
            </h1>
            <p class="text-muted">
                {{#if book.id}}Atualize as informa√ß√µes do livro{{else}}Adicione um novo livro ao cat√°logo{{/if}}
            </p>
        </div>
        <div class="dashboard-actions">
            <a href="/books" class="btn btn-secondary">‚Üê Voltar aos Livros</a>
        </div>
    </div>

    {{#if error}}
        <div class="alert alert-error">{{error}}</div>
    {{/if}}

    <div class="card">
        <div class="card-header">
            <h3 class="card-title">
                {{#if book.id}}‚úèÔ∏è Editar Informa√ß√µes{{else}}‚ûï Cadastrar Livro{{/if}}
            </h3>
            <p class="card-description">Preencha os campos abaixo com as informa√ß√µes do livro</p>
        </div>
        
        <form action="{{action}}" method="{{method}}">
            <div class="form-group">
                <label for="title">T√≠tulo do Livro *</label>
                <input 
                    type="text" 
                    id="title" 
                    name="title" 
                    value="{{book.title}}" 
                    placeholder="Digite o t√≠tulo do livro"
                    required
                >
            </div>

            <div class="form-group">
                <label for="authorId">Autor *</label>
                <select id="authorId" name="authorId" required>
                    <option value="">Selecione o autor do livro</option>
                    {{#each authors}}
                        <option value="{{this.id}}" {{#if (eq this.id ../book.authorId)}}selected{{/if}}>
                            {{this.name}}
                        </option>
                    {{/each}}
                </select>
                <div style="margin-top: 0.5rem;">
                    <a href="/authors/new" style="color: var(--primary); text-decoration: none; font-size: 0.875rem;">
                        ‚ûï N√£o encontrou o autor? Cadastre aqui
                    </a>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div class="form-group">
                    <label for="isbn">ISBN</label>
                    <input 
                        type="text" 
                        id="isbn" 
                        name="isbn" 
                        value="{{book.isbn}}"
                        placeholder="978-3-16-148410-0"
                    >
                </div>

                <div class="form-group">
                    <label for="publishedYear">Ano de Publica√ß√£o</label>
                    <input 
                        type="number" 
                        id="publishedYear" 
                        name="publishedYear" 
                        value="{{book.publishedYear}}" 
                        min="1000" 
                        max="2030"
                        placeholder="2024"
                    >
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                <div class="form-group">
                    <label for="genre">G√™nero</label>
                    <input 
                        type="text" 
                        id="genre" 
                        name="genre" 
                        value="{{book.genre}}"
                        placeholder="Fic√ß√£o, Romance, etc."
                    >
                </div>

                <div class="form-group">
                    <label for="pages">N√∫mero de P√°ginas</label>
                    <input 
                        type="number" 
                        id="pages" 
                        name="pages" 
                        value="{{book.pages}}" 
                        min="1"
                        placeholder="300"
                    >
                </div>

                <div class="form-group">
                    <label for="quantity">Quantidade de Exemplares *</label>
                    <input 
                        type="number" 
                        id="quantity" 
                        name="quantity" 
                        value="{{#if book.quantity}}{{book.quantity}}{{else}}1{{/if}}" 
                        min="1" 
                        required
                        placeholder="1"
                    >
                </div>
            </div>

            <div class="form-group">
                <label for="publisher">Editora</label>
                <input 
                    type="text" 
                    id="publisher" 
                    name="publisher" 
                    value="{{book.publisher}}"
                    placeholder="Nome da editora"
                >
            </div>

            <div class="form-group">
                <label for="description">Descri√ß√£o/Sinopse</label>
                <textarea 
                    id="description" 
                    name="description" 
                    rows="4" 
                    placeholder="Escreva uma breve descri√ß√£o ou sinopse do livro..."
                >{{book.description}}</textarea>
            </div>

            <div class="flex gap-4">
                <button type="submit" class="btn btn-primary">
                    {{#if book.id}}üìù Atualizar Livro{{else}}üìö Cadastrar Livro{{/if}}
                </button>
                <a href="/books" class="btn btn-secondary">
                    Cancelar
                </a>
            </div>
        </form>
    </div>
</div>
